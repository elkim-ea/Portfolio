# # âœ… Java 21 ë²„ì „ (bookwormì€ slim í›„ì†)
# FROM openjdk:21-ea-21-jdk-slim

# RUN apt-get update && apt-get install -y curl && \
#     apt-get clean && rm -rf /var/lib/apt/lists/*
    
# # âœ… tzdata ë¹„ëŒ€í™”í˜• ì„¤ì¹˜ ë° í•œêµ­ ì‹œê°„ëŒ€ ì„¤ì •
# ENV DEBIAN_FRONTEND=noninteractive
# ENV TZ=Asia/Seoul
# RUN apt-get update && \
#     apt-get install -y --no-install-recommends tzdata && \
#     ln -sf /usr/share/zoneinfo/Asia/Seoul /etc/localtime && \
#     echo "Asia/Seoul" > /etc/timezone && \
#     dpkg-reconfigure -f noninteractive tzdata && \
#     apt-get clean && \
#     rm -rf /var/lib/apt/lists/*


# # ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
# WORKDIR /app

# # âœ… ì •í™•í•œ jar íŒŒì¼ëª… ì§€ì •
# COPY ./build/libs/backend-0.0.1-SNAPSHOT.jar app.jar

# # uploads í´ë” ë³µì‚¬ (ì—†ìœ¼ë©´ ìë™ ìƒì„±)
# COPY ./uploads ./uploads

# # âœ… í¬íŠ¸ ê°œë°©
# EXPOSE 8080

# # âœ… JVM íƒ€ì„ì¡´ KSTë¡œ ê°•ì œ
# ENTRYPOINT ["java", "-Duser.timezone=Asia/Seoul", "-jar", "app.jar"]


##################################################
# Gcpìš© ìˆ˜ì •ë³¸
##################################################
# âœ… Java 21 ë²„ì „
FROM openjdk:21-ea-21-jdk-slim

RUN apt-get update && apt-get install -y curl && \
    apt-get clean && rm -rf /var/lib/apt/lists/*
    
ENV DEBIAN_FRONTEND=noninteractive
ENV TZ=Asia/Seoul
RUN apt-get update && \
    apt-get install -y --no-install-recommends tzdata && \
    ln -sf /usr/share/zoneinfo/Asia/Seoul /etc/localtime && \
    echo "Asia/Seoul" > /etc/timezone && \
    dpkg-reconfigure -f noninteractive tzdata && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

# JAR ë³µì‚¬
COPY build/libs/backend-0.0.1-SNAPSHOT.jar app.jar

# ğŸ”¥ uploads í´ë”ë¥¼ Springì´ ì°¾ëŠ” ê²½ë¡œ(/app/uploads)ë¡œ ë³µì‚¬
COPY ./uploads /app/uploads

EXPOSE 8080

ENTRYPOINT ["java", "-Duser.timezone=Asia/Seoul", "-jar", "app.jar"]
